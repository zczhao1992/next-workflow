(()=>{var e={};e.id=917,e.ids=[917],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78018:e=>{"use strict";e.exports=require("puppeteer")},71396:e=>{"use strict";e.exports=require("undici")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},6005:e=>{"use strict";e.exports=require("node:crypto")},84492:e=>{"use strict";e.exports=require("node:stream")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},57310:e=>{"use strict";e.exports=require("url")},33509:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>i}),r(53222),r(1576),r(56656),r(61692),r(12523);var s=r(23191),o=r(88716),a=r(37922),n=r.n(a),l=r(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);r.d(t,c);let i=["",{children:["workflow",{children:["runs",{children:["[workflowId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,53222)),"E:\\Demo\\next-workflow\\src\\app\\workflow\\runs\\[workflowId]\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1576)),"E:\\Demo\\next-workflow\\src\\app\\workflow\\runs\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,56656)),"E:\\Demo\\next-workflow\\src\\app\\workflow\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,61692)),"E:\\Demo\\next-workflow\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Demo\\next-workflow\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["E:\\Demo\\next-workflow\\src\\app\\workflow\\runs\\[workflowId]\\page.tsx"],u="/workflow/runs/[workflowId]/page",f={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/workflow/runs/[workflowId]/page",pathname:"/workflow/runs/[workflowId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},91518:(e,t,r)=>{let s={"853804e72b25c51acd650cec86ff049396acf27f":()=>Promise.resolve().then(r.bind(r,41729)).then(e=>e.getWorkflowExecutions)};async function o(e,...t){return(await s[e]()).apply(null,t)}e.exports={"853804e72b25c51acd650cec86ff049396acf27f":o.bind(null,"853804e72b25c51acd650cec86ff049396acf27f")}},33680:(e,t,r)=>{let s={"3047de3067a82dc5453db7770d6038992ed5e3bf":()=>Promise.resolve().then(r.bind(r,56496)).then(e=>e.updateWorkflow),"3ee51c67189e2b7d6a121d0e57c2859697778aaa":()=>Promise.resolve().then(r.bind(r,42259)).then(e=>e.RunWorkflow),"6c1c04f605a38c8567e83c8e6f7ca0ebcd48984a":()=>Promise.resolve().then(r.bind(r,94106)).then(e=>e.publishWorkflow),"7218128e2cdf4273bd91f89961a1eedd113c31ea":()=>Promise.resolve().then(r.bind(r,31178)).then(e=>e.unpublishWorkflow),b15e8abe97d493bd29a52f19533c6ef64bdb497c:()=>Promise.resolve().then(r.bind(r,3479)).then(e=>e.invalidateCacheAction)};async function o(e,...t){return(await s[e]()).apply(null,t)}e.exports={"3047de3067a82dc5453db7770d6038992ed5e3bf":o.bind(null,"3047de3067a82dc5453db7770d6038992ed5e3bf"),"3ee51c67189e2b7d6a121d0e57c2859697778aaa":o.bind(null,"3ee51c67189e2b7d6a121d0e57c2859697778aaa"),"6c1c04f605a38c8567e83c8e6f7ca0ebcd48984a":o.bind(null,"6c1c04f605a38c8567e83c8e6f7ca0ebcd48984a"),"7218128e2cdf4273bd91f89961a1eedd113c31ea":o.bind(null,"7218128e2cdf4273bd91f89961a1eedd113c31ea"),b15e8abe97d493bd29a52f19533c6ef64bdb497c:o.bind(null,"b15e8abe97d493bd29a52f19533c6ef64bdb497c")}},96086:(e,t,r)=>{Promise.resolve().then(r.bind(r,20149)),Promise.resolve().then(r.bind(r,70616))},42041:(e,t,r)=>{"use strict";r.d(t,{G:()=>n,t:()=>c});var s=r(10326),o=r(51223);let a={PENDING:"bg-slate-400",RUNNING:"bg-yellow-400",FAILED:"bg-red-400",COMPLETED:"bg-emerald-600"};function n({status:e}){return s.jsx("div",{className:(0,o.cn)("w-2 h-2 rounded-full",a[e])})}let l={PENDING:"text-slate-400",RUNNING:"text-yellow-400",FAILED:"text-red-400",COMPLETED:"text-emerald-600"};function c({status:e}){return s.jsx("span",{className:(0,o.cn)("lowercase",l[e]),children:{PENDING:"等待中",RUNNING:"运行中",COMPLETED:"运行成功",FAILED:"已失败"}[e]})}},70616:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var s=r(10326),o=r(20108),a=r(35047),n=r(73178),l=r(70835),c=r(41156),i=r(42041);r(15424);var d=(0,r(46242).$)("853804e72b25c51acd650cec86ff049396acf27f"),u=r(9730);function f({workflowId:e,initialData:t}){let r=(0,a.useRouter)(),f=(0,o.a)({queryKey:["executions",e],initialData:t,queryFn:()=>d(e),refetchInterval:5e3}),x={PENDING:"等待中",RUNNING:"运行中",COMPLETED:"运行成功",FAILED:"已失败"};return s.jsx("div",{className:"border rounded-lg shadow-md overflow-auto",children:(0,s.jsxs)(c.iA,{className:"h-full",children:[s.jsx(c.xD,{className:"bg-muted",children:(0,s.jsxs)(c.SC,{children:[s.jsx(c.ss,{children:"Id"}),s.jsx(c.ss,{children:"状态"}),s.jsx(c.ss,{className:"text-right text-xs text-muted-foreground",children:"开始时间(秒)"})]})}),s.jsx(c.RM,{className:"gap-2 h-full overflow-auto",children:f.data.map(e=>{let t=(0,u.h)(e.completedAt,e.startedAt),o=e.startedAt&&(0,n.Q)(e.startedAt,{addSuffix:!0,locale:l.U});return(0,s.jsxs)(c.SC,{className:"cursor-pointer",onClick:()=>{r.push(`/workflow/runs/${e.workflowId}/${e.id}`)},children:[s.jsx(c.pj,{children:(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-semibold",children:e.id}),s.jsx("div",{className:"text-muted-foreground text-xs"})]})}),s.jsx(c.pj,{children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[s.jsx(i.G,{status:e.status}),s.jsx("span",{className:"font-semibold capitalize",children:x[e.status]})]}),s.jsx("div",{className:"text-muted-foreground text-xs mx-5",children:t})]})}),s.jsx(c.pj,{className:"text-right text-muted-foreground",children:o})]},e.id)})})]})})}},22486:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(27162).Z)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]])},41729:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getWorkflowExecutions:()=>n});var s=r(24330);r(60166);var o=r(27577),a=r(13538);async function n(e){let{userId:t}=(0,o.I)();if(!t)throw Error("账户错误");return a.Z.workflowExecution.findMany({where:{userId:t,workflowId:e},orderBy:{createdAt:"desc"}})}(0,r(40618).h)([n]),(0,s.j)("853804e72b25c51acd650cec86ff049396acf27f",n)},53222:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(19510),o=r(71159),a=r(19541),n=r(22486),l=r(50234),c=r(68570);let i=(0,c.createProxy)(String.raw`E:\Demo\next-workflow\src\app\workflow\runs\[workflowId]\_components\ExecutionsTable.tsx`),{__esModule:d,$$typeof:u}=i;i.default;let f=(0,c.createProxy)(String.raw`E:\Demo\next-workflow\src\app\workflow\runs\[workflowId]\_components\ExecutionsTable.tsx#default`);var x=r(41729);function p({params:e}){return(0,s.jsxs)("div",{className:"h-full w-full overflow-auto",children:[s.jsx(l.ZP,{workflowId:e.workflowId,hideButtons:!0,title:"日志",subtitle:"日志列表"}),s.jsx(o.Suspense,{fallback:s.jsx("div",{className:"flex h-full w-full justify-center items-center",children:s.jsx(a.Z,{size:30,className:"animate-spin stroke-primary"})}),children:s.jsx(w,{workflowId:e.workflowId})})]})}async function w({workflowId:e}){let t=await (0,x.getWorkflowExecutions)(e);return t?0===t.length?s.jsx("div",{className:"container w-full py-6",children:(0,s.jsxs)("div",{className:"flex items-center flex-col gap-2 justify-center h-full w-full",children:[s.jsx("div",{className:"rounded-full bg-accent w-20 h-20 flex items-center justify-center",children:s.jsx(n.Z,{size:40,className:"stroke-primary"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 text-center",children:[s.jsx("p",{className:"font-bold",children:"此工作流尚未运行"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"您可以在编辑器页面中运行"})]})]})}):s.jsx("div",{className:"container py-6 w-full",children:s.jsx(f,{workflowId:e,initialData:t})}):s.jsx("div",{children:"无数据"})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,547,86,0,370,341,343,130,12,877,730,581,431],()=>r(33509));module.exports=s})();