(()=>{var e={};e.id=695,e.ids=[695],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78018:e=>{"use strict";e.exports=require("puppeteer")},71396:e=>{"use strict";e.exports=require("undici")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},6005:e=>{"use strict";e.exports=require("node:crypto")},84492:e=>{"use strict";e.exports=require("node:stream")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},57310:e=>{"use strict";e.exports=require("url")},63239:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(18934),t(73202),t(56656),t(61692),t(12523);var a=t(23191),s=t(88716),n=t(37922),l=t.n(n),i=t(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(r,o);let d=["",{children:["workflow",{children:["editor",{children:["[workflowId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,18934)),"E:\\Demo\\next-workflow\\src\\app\\workflow\\editor\\[workflowId]\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,73202)),"E:\\Demo\\next-workflow\\src\\app\\workflow\\editor\\[workflowId]\\loading.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,56656)),"E:\\Demo\\next-workflow\\src\\app\\workflow\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,61692)),"E:\\Demo\\next-workflow\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"E:\\Demo\\next-workflow\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["E:\\Demo\\next-workflow\\src\\app\\workflow\\editor\\[workflowId]\\page.tsx"],u="/workflow/editor/[workflowId]/page",f={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/workflow/editor/[workflowId]/page",pathname:"/workflow/editor/[workflowId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},61713:(e,r,t)=>{let a={"509fd53314a01037dfc143dc26c2136db06dbe5b":()=>Promise.resolve().then(t.bind(t,21724)).then(e=>e.getCredentialsForUser),"3047de3067a82dc5453db7770d6038992ed5e3bf":()=>Promise.resolve().then(t.bind(t,56496)).then(e=>e.updateWorkflow),"3ee51c67189e2b7d6a121d0e57c2859697778aaa":()=>Promise.resolve().then(t.bind(t,42259)).then(e=>e.RunWorkflow),"6c1c04f605a38c8567e83c8e6f7ca0ebcd48984a":()=>Promise.resolve().then(t.bind(t,94106)).then(e=>e.publishWorkflow),"7218128e2cdf4273bd91f89961a1eedd113c31ea":()=>Promise.resolve().then(t.bind(t,31178)).then(e=>e.unpublishWorkflow),b15e8abe97d493bd29a52f19533c6ef64bdb497c:()=>Promise.resolve().then(t.bind(t,3479)).then(e=>e.invalidateCacheAction)};async function s(e,...r){return(await a[e]()).apply(null,r)}e.exports={"509fd53314a01037dfc143dc26c2136db06dbe5b":s.bind(null,"509fd53314a01037dfc143dc26c2136db06dbe5b"),"3047de3067a82dc5453db7770d6038992ed5e3bf":s.bind(null,"3047de3067a82dc5453db7770d6038992ed5e3bf"),"3ee51c67189e2b7d6a121d0e57c2859697778aaa":s.bind(null,"3ee51c67189e2b7d6a121d0e57c2859697778aaa"),"6c1c04f605a38c8567e83c8e6f7ca0ebcd48984a":s.bind(null,"6c1c04f605a38c8567e83c8e6f7ca0ebcd48984a"),"7218128e2cdf4273bd91f89961a1eedd113c31ea":s.bind(null,"7218128e2cdf4273bd91f89961a1eedd113c31ea"),b15e8abe97d493bd29a52f19533c6ef64bdb497c:s.bind(null,"b15e8abe97d493bd29a52f19533c6ef64bdb497c")}},52836:(e,r,t)=>{Promise.resolve().then(t.bind(t,25469))},43810:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(62881).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},47035:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(62881).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},25469:(e,r,t)=>{"use strict";t.d(r,{default:()=>eW});var a=t(10326),s=t(9051),n=t(17577),l=t(33305),i=t(25058),o=t(44794),d=t(41190),c=t(82015);function u({param:e,value:r,updateNodeParamValue:t,disabled:s}){let[l,i]=(0,n.useState)(r),u=(0,n.useId)(),f=d.I;return"textarea"===e.variant&&(f=c.g),(0,a.jsxs)("div",{className:"space-y-1 p-1 w-full",children:[(0,a.jsxs)(o._,{htmlFor:u,className:"text-xs flex",children:[e.label,e.required&&a.jsx("p",{className:"text-red-400 px-2",children:"*"})]}),a.jsx(f,{id:u,disabled:s,className:"text-xs ",value:l,placeholder:"请输入",onChange:e=>i(e.target.value),onBlur:e=>t(e.target.value)}),e.helperText&&a.jsx("p",{className:"text-muted-foreground px-2",children:e.helperText})]})}function f({param:e}){return a.jsx("p",{className:"text-xs",children:e.label})}var p=t(29280);function x({param:e,value:r,updateNodeParamValue:t}){let s=(0,n.useId)();return(0,a.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,a.jsxs)(o._,{htmlFor:s,className:"text-xs flex",children:[e.label,e.required&&a.jsx("p",{className:"text-red-400 px-2",children:"*"})]}),(0,a.jsxs)(p.Ph,{onValueChange:e=>t(e),defaultValue:r,children:[a.jsx(p.i4,{className:"w-full",children:a.jsx(p.ki,{placeholder:"选择选项"})}),a.jsx(p.Bw,{children:a.jsx(p.DI,{children:e.options.map(e=>a.jsx(p.Ql,{value:e.value,children:e.label},e.value))})})]})]})}var m=t(20108);t(15424);var h=(0,t(46242).$)("509fd53314a01037dfc143dc26c2136db06dbe5b");function b({param:e,value:r,updateNodeParamValue:t}){let s=(0,n.useId)(),l=(0,m.a)({queryKey:["credentials-for-user"],queryFn:()=>h(),refetchInterval:1e4});return(0,a.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,a.jsxs)(o._,{htmlFor:s,className:"text-xs flex",children:[e.label,e.required&&a.jsx("p",{className:"text-red-400 px-2",children:"*"})]}),(0,a.jsxs)(p.Ph,{onValueChange:e=>t(e),defaultValue:r,children:[a.jsx(p.i4,{className:"w-full",children:a.jsx(p.ki,{placeholder:"请选择"})}),a.jsx(p.Bw,{children:(0,a.jsxs)(p.DI,{children:[a.jsx(p.n5,{children:"凭证"}),l.data?.map(e=>a.jsx(p.Ql,{value:e.id,children:e.name},e.id))]})})]})]})}function g({param:e,nodeId:r,disabled:t}){let{updateNodeData:l,getNode:o}=(0,s._K)(),d=o(r),c=d?.data.inputs?.[e.name],p=(0,n.useCallback)(t=>{l(r,{inputs:{...d?.data.inputs,[e.name]:t}})},[r,l,e.name,d?.data.inputs]);switch(e.type){case i.G.STRING:return a.jsx(u,{param:e,value:c,updateNodeParamValue:p,disabled:t});case i.G.BROWSER_INSTANCE:return a.jsx(f,{param:e,value:"",updateNodeParamValue:p});case i.G.SELECT:return a.jsx(x,{param:e,value:c,updateNodeParamValue:p,disabled:t});case i.G.CREDENTIAL:return a.jsx(b,{param:e,value:c,updateNodeParamValue:p,disabled:t});default:return a.jsx("div",{className:"w-full",children:a.jsx("p",{className:"text-xs text-muted-foreground",children:"未生效"})})}}let j={STRING:"!bg-amber-400",BROWSER_INSTANCE:"!bg-sky-400",SELECT:"!bg-rose-400",CREDENTIAL:"!bg-teal-400"};var w=t(45167),y=t(51223);function v({children:e}){return a.jsx("div",{className:"flex flex-col divide-y gap-2",children:e})}function N({input:e,nodeId:r}){let{invalidInputs:t}=(0,w.Z)(),n=(0,s.Mi)().some(t=>t.target===r&&t.targetHandle===e.name),i=t.find(e=>e.nodeId===r)?.inputs.find(r=>r===e.name);return(0,a.jsxs)("div",{className:(0,y.cn)("flex justify-start relative p-3 bg-secondary w-full",i&&"bg-destructive/30"),children:[a.jsx(g,{param:e,nodeId:r,disabled:n}),!e.hideHandle&&a.jsx(s.HH,{id:e.name,isConnectable:!n,type:"target",position:l.Ly.Left,className:(0,y.cn)("!bg-muted-foreground !border-2 !border-background !-left-2 !w-4 !h-4",j[e.type])})]})}function k({children:e}){return a.jsx("div",{className:"flex flex-col divide-y gap-1",children:e})}function E({output:e}){return(0,a.jsxs)("div",{className:"flex justify-end relative p-3 bg-secondary",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:e.label}),!e.hideHandle&&a.jsx(s.HH,{id:e.name,type:"source",position:l.Ly.Right,className:(0,y.cn)("!bg-muted-foreground !border-2 !border-background !-right-2 !w-4 !h-4",j[e.type])})]})}var C=t(83761);function R({nodeId:e,isSelected:r,children:t}){let{getNode:n,setCenter:l}=(0,s._K)(),{invalidInputs:i}=(0,w.Z)(),o=i.some(r=>r.nodeId===e);return a.jsx("div",{onDoubleClick:()=>{let r=n(e);if(!r)return;let{position:t,measured:a}=r;if(!t||!a)return;let{width:s,height:i}=a,o=t.x+s/2,d=t.y+i/2;void 0!==o&&void 0!==d&&l(o,d,{zoom:1,duration:500})},className:(0,y.cn)("rounded-md cursor-pointer bg-background border-2 border-separate w-[420px] text-xs gap-1 flex flex-col",r&&"border-primary",o&&"border-destructive border-2"),children:t})}var _=t(47035),I=t(43810);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let T=(0,t(62881).Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var D=t(38443),P=t(91664);function A(e,r){return{id:crypto.randomUUID(),type:"FlowScrapeNode",dragHandle:".drag-handle",data:{type:e,inputs:{}},position:r??{x:0,y:0}}}function L({taskType:e,nodeId:r}){let t=C.C[e],{deleteElements:n,getNode:l,addNodes:i}=(0,s._K)();return(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2",children:[a.jsx(t.icon,{size:16}),(0,a.jsxs)("div",{className:"flex justify-between items-center w-full",children:[a.jsx("p",{className:"text-xs font-bold uppercase text-muted-foreground",children:t.label}),(0,a.jsxs)("div",{className:"flex gap-1 items-center",children:[t.isEntryPoint&&a.jsx(D.C,{children:"触发器"}),!t.isEntryPoint&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(P.z,{variant:"ghost",size:"icon",onClick:()=>{n({nodes:[{id:r}]})},children:a.jsx(_.Z,{size:12})}),a.jsx(P.z,{variant:"ghost",size:"icon",onClick:()=>{let e=l(r),t=e.position.x,a=e.position.y;i([A(e.data.type,{x:t,y:a+e.measured?.height+20})])},children:a.jsx(I.Z,{size:12})})]}),a.jsx(P.z,{variant:"ghost",size:"icon",className:"drag-handle cursor-grab active:cursor-grabbing",children:a.jsx(T,{size:20})})]})]})]})}let O=(0,n.memo)(e=>{let r=e.data,t=C.C[r.type];return(0,a.jsxs)(R,{nodeId:e.id,isSelected:!!e.selected,children:[a.jsx(L,{taskType:r.type,nodeId:e.id}),a.jsx(v,{children:t.inputs.map(r=>a.jsx(N,{input:r,nodeId:e.id},r.name))}),a.jsx(k,{children:t.outputs.map(e=>a.jsx(E,{output:e},e.name))})]})});O.displayName="NodeComponent",t(60517);let q={FlowScrapeNode:O},V={default:function(e){let[r,t,n]=(0,l.OW)(e),{setEdges:i}=(0,s._K)();return(0,a.jsxs)(a.Fragment,{children:[a.jsx(s.u5,{path:r,markerEnd:e.markerEnd,style:e.style}),a.jsx(s.XQ,{children:a.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${t}px,${n}px)`,pointerEvents:"all"},children:a.jsx(P.z,{variant:"outline",size:"icon",className:"w-5 h-5 border cursor-pointer rounded-full text-xs leading-none hover:shadow-lg",onClick:()=>{i(r=>r.filter(r=>r.id!==e.id))},children:"x"})})})]})}},M=[50,50],U={padding:1};function z({workflow:e}){let[r,t,i]=(0,s.Rr)([]),[o,d,c]=(0,s.ll)([]),{setViewport:u,screenToFlowPosition:f,updateNodeData:p}=(0,s._K)(),x=(0,n.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),m=(0,n.useCallback)(e=>{e.preventDefault();let r=e.dataTransfer.getData("application/reactflow");if(!r)return;let a=A(r,f({x:e.clientX,y:e.clientY}));t(e=>e.concat(a))},[f,t]),h=(0,n.useCallback)(e=>{if(d(r=>(0,l.Z_)({...e,animated:!0},r)),!e.targetHandle)return;let t=r.find(r=>r.id===e.target);if(!t)return;let a=t.data.inputs;p(t.id,{inputs:{...a,[e.targetHandle]:""}})},[d,p,r]),b=(0,n.useCallback)(e=>{if(e.source===e.target)return!1;let t=r.find(r=>r.id===e.source),a=r.find(r=>r.id===e.target);if(!t||!a)return console.error("节点未找到"),!1;let s=C.C[t.data.type],n=C.C[a.data.type],i=s.outputs.find(r=>r.name===e.sourceHandle),d=n.inputs.find(r=>r.name===e.targetHandle);if(d?.type!==i?.type)return console.error("节点不匹配"),!1;let c=(t,a=new Set)=>{if(a.has(t.id))return!1;for(let s of(a.add(t.id),(0,l.xA)(t,r,o)))if(s.id===e.source||c(s,a))return!0};return!c(a)},[r,o]);return a.jsx("main",{className:"h-full w-full",children:(0,a.jsxs)(s.x$,{nodes:r,edges:o,onNodesChange:i,onEdgesChange:c,snapToGrid:!0,snapGrid:M,fitView:!0,fitViewOptions:U,nodeTypes:q,edgeTypes:V,onDragOver:x,onDrop:m,onConnect:h,isValidConnection:b,children:[a.jsx(s.ZX,{position:"top-left",fitViewOptions:U}),a.jsx(s.Aq,{variant:s.T7.Dots,gap:12,size:1})]})})}var G=t(20149),S=t(93095),F=t(70545),H=t(48051),Z=t(82561),B=t(52067),W=t(45226),K=t(65819),$=t(9815),X=t(88957),Y="Collapsible",[Q,J]=(0,S.b)(Y),[ee,er]=Q(Y),et=n.forwardRef((e,r)=>{let{__scopeCollapsible:t,open:s,defaultOpen:l,disabled:i,onOpenChange:o,...d}=e,[c,u]=(0,B.T)({prop:s,defaultProp:l??!1,onChange:o,caller:Y});return(0,a.jsx)(ee,{scope:t,disabled:i,contentId:(0,X.M)(),open:c,onOpenToggle:n.useCallback(()=>u(e=>!e),[u]),children:(0,a.jsx)(W.WV.div,{"data-state":eo(c),"data-disabled":i?"":void 0,...d,ref:r})})});et.displayName=Y;var ea="CollapsibleTrigger",es=n.forwardRef((e,r)=>{let{__scopeCollapsible:t,...s}=e,n=er(ea,t);return(0,a.jsx)(W.WV.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":eo(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...s,ref:r,onClick:(0,Z.M)(e.onClick,n.onOpenToggle)})});es.displayName=ea;var en="CollapsibleContent",el=n.forwardRef((e,r)=>{let{forceMount:t,...s}=e,n=er(en,e.__scopeCollapsible);return(0,a.jsx)($.z,{present:t||n.open,children:({present:e})=>(0,a.jsx)(ei,{...s,ref:r,present:e})})});el.displayName=en;var ei=n.forwardRef((e,r)=>{let{__scopeCollapsible:t,present:s,children:l,...i}=e,o=er(en,t),[d,c]=n.useState(s),u=n.useRef(null),f=(0,H.e)(r,u),p=n.useRef(0),x=p.current,m=n.useRef(0),h=m.current,b=o.open||d,g=n.useRef(b),j=n.useRef(void 0);return n.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,K.b)(()=>{let e=u.current;if(e){j.current=j.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let r=e.getBoundingClientRect();p.current=r.height,m.current=r.width,g.current||(e.style.transitionDuration=j.current.transitionDuration,e.style.animationName=j.current.animationName),c(s)}},[o.open,s]),(0,a.jsx)(W.WV.div,{"data-state":eo(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!b,...i,ref:f,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":h?`${h}px`:void 0,...e.style},children:b&&l})});function eo(e){return e?"open":"closed"}var ed=t(17124),ec="Accordion",eu=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ef,ep,ex]=(0,F.B)(ec),[em,eh]=(0,S.b)(ec,[ex,J]),eb=J(),eg=n.forwardRef((e,r)=>{let{type:t,...s}=e;return(0,a.jsx)(ef.Provider,{scope:e.__scopeAccordion,children:"multiple"===t?(0,a.jsx)(ek,{...s,ref:r}):(0,a.jsx)(eN,{...s,ref:r})})});eg.displayName=ec;var[ej,ew]=em(ec),[ey,ev]=em(ec,{collapsible:!1}),eN=n.forwardRef((e,r)=>{let{value:t,defaultValue:s,onValueChange:l=()=>{},collapsible:i=!1,...o}=e,[d,c]=(0,B.T)({prop:t,defaultProp:s??"",onChange:l,caller:ec});return(0,a.jsx)(ej,{scope:e.__scopeAccordion,value:n.useMemo(()=>d?[d]:[],[d]),onItemOpen:c,onItemClose:n.useCallback(()=>i&&c(""),[i,c]),children:(0,a.jsx)(ey,{scope:e.__scopeAccordion,collapsible:i,children:(0,a.jsx)(eR,{...o,ref:r})})})}),ek=n.forwardRef((e,r)=>{let{value:t,defaultValue:s,onValueChange:l=()=>{},...i}=e,[o,d]=(0,B.T)({prop:t,defaultProp:s??[],onChange:l,caller:ec}),c=n.useCallback(e=>d((r=[])=>[...r,e]),[d]),u=n.useCallback(e=>d((r=[])=>r.filter(r=>r!==e)),[d]);return(0,a.jsx)(ej,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:(0,a.jsx)(ey,{scope:e.__scopeAccordion,collapsible:!0,children:(0,a.jsx)(eR,{...i,ref:r})})})}),[eE,eC]=em(ec),eR=n.forwardRef((e,r)=>{let{__scopeAccordion:t,disabled:s,dir:l,orientation:i="vertical",...o}=e,d=n.useRef(null),c=(0,H.e)(d,r),u=ep(t),f="ltr"===(0,ed.gm)(l),p=(0,Z.M)(e.onKeyDown,e=>{if(!eu.includes(e.key))return;let r=e.target,t=u().filter(e=>!e.ref.current?.disabled),a=t.findIndex(e=>e.ref.current===r),s=t.length;if(-1===a)return;e.preventDefault();let n=a,l=s-1,o=()=>{(n=a+1)>l&&(n=0)},d=()=>{(n=a-1)<0&&(n=l)};switch(e.key){case"Home":n=0;break;case"End":n=l;break;case"ArrowRight":"horizontal"===i&&(f?o():d());break;case"ArrowDown":"vertical"===i&&o();break;case"ArrowLeft":"horizontal"===i&&(f?d():o());break;case"ArrowUp":"vertical"===i&&d()}let c=n%s;t[c].ref.current?.focus()});return(0,a.jsx)(eE,{scope:t,disabled:s,direction:l,orientation:i,children:(0,a.jsx)(ef.Slot,{scope:t,children:(0,a.jsx)(W.WV.div,{...o,"data-orientation":i,ref:c,onKeyDown:s?void 0:p})})})}),e_="AccordionItem",[eI,eT]=em(e_),eD=n.forwardRef((e,r)=>{let{__scopeAccordion:t,value:s,...n}=e,l=eC(e_,t),i=ew(e_,t),o=eb(t),d=(0,X.M)(),c=s&&i.value.includes(s)||!1,u=l.disabled||e.disabled;return(0,a.jsx)(eI,{scope:t,open:c,disabled:u,triggerId:d,children:(0,a.jsx)(et,{"data-orientation":l.orientation,"data-state":eM(c),...o,...n,ref:r,disabled:u,open:c,onOpenChange:e=>{e?i.onItemOpen(s):i.onItemClose(s)}})})});eD.displayName=e_;var eP="AccordionHeader",eA=n.forwardRef((e,r)=>{let{__scopeAccordion:t,...s}=e,n=eC(ec,t),l=eT(eP,t);return(0,a.jsx)(W.WV.h3,{"data-orientation":n.orientation,"data-state":eM(l.open),"data-disabled":l.disabled?"":void 0,...s,ref:r})});eA.displayName=eP;var eL="AccordionTrigger",eO=n.forwardRef((e,r)=>{let{__scopeAccordion:t,...s}=e,n=eC(ec,t),l=eT(eL,t),i=ev(eL,t),o=eb(t);return(0,a.jsx)(ef.ItemSlot,{scope:t,children:(0,a.jsx)(es,{"aria-disabled":l.open&&!i.collapsible||void 0,"data-orientation":n.orientation,id:l.triggerId,...o,...s,ref:r})})});eO.displayName=eL;var eq="AccordionContent",eV=n.forwardRef((e,r)=>{let{__scopeAccordion:t,...s}=e,n=eC(ec,t),l=eT(eq,t),i=eb(t);return(0,a.jsx)(el,{role:"region","aria-labelledby":l.triggerId,"data-orientation":n.orientation,...i,...s,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});function eM(e){return e?"open":"closed"}eV.displayName=eq;var eU=t(941);let ez=n.forwardRef(({className:e,...r},t)=>a.jsx(eD,{ref:t,className:(0,y.cn)("border-b",e),...r}));ez.displayName="AccordionItem";let eG=n.forwardRef(({className:e,children:r,...t},s)=>a.jsx(eA,{className:"flex",children:(0,a.jsxs)(eO,{ref:s,className:(0,y.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...t,children:[r,a.jsx(eU.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));eG.displayName=eO.displayName;let eS=n.forwardRef(({className:e,children:r,...t},s)=>a.jsx(eV,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:a.jsx("div",{className:(0,y.cn)("pb-4 pt-0",e),children:r})}));function eF(){return a.jsx("aside",{className:"w-[340px] min-w-[340px] max-w-[340px] border-r-2 border-separate h-full p-2 px-4 overflow-auto",children:(0,a.jsxs)(eg,{type:"multiple",className:"w-full",defaultValue:["extraction","interactions","timing","results","storage"],children:[(0,a.jsxs)(ez,{value:"interactions",children:[a.jsx(eG,{className:"font-bold",children:"用户行为"}),(0,a.jsxs)(eS,{className:"flex flex-col gap-1",children:[a.jsx(eH,{taskType:i.U.NAVIGATE_URL}),a.jsx(eH,{taskType:i.U.FILL_INPUT}),a.jsx(eH,{taskType:i.U.CLICK_ELEMENT}),a.jsx(eH,{taskType:i.U.SCROLL_TO_ELEMENT})]})]}),(0,a.jsxs)(ez,{value:"extraction",children:[a.jsx(eG,{className:"font-bold",children:"数据提取"}),(0,a.jsxs)(eS,{className:"flex flex-col gap-1",children:[a.jsx(eH,{taskType:i.U.PAGE_TO_HTML}),a.jsx(eH,{taskType:i.U.EXTRACT_TEXT_FROM_ELEMENT})]})]}),(0,a.jsxs)(ez,{value:"storage",children:[a.jsx(eG,{className:"font-bold",children:"数据存储"}),(0,a.jsxs)(eS,{className:"flex flex-col gap-1",children:[a.jsx(eH,{taskType:i.U.READ_PROPERTY_FROM_JSON}),a.jsx(eH,{taskType:i.U.ADD_PROPERTY_TO_JSON})]})]}),(0,a.jsxs)(ez,{value:"timing",children:[a.jsx(eG,{className:"font-bold",children:"定时控制"}),a.jsx(eS,{className:"flex flex-col gap-1",children:a.jsx(eH,{taskType:i.U.WAIT_FOR_ELEMENT})})]}),(0,a.jsxs)(ez,{value:"results",children:[a.jsx(eG,{className:"font-bold",children:"网络钩子"}),a.jsx(eS,{className:"flex flex-col gap-1",children:a.jsx(eH,{taskType:i.U.DELIVER_VIA_WEBHOOK})})]})]})})}function eH({taskType:e}){let r=C.C[e],t=(e,r)=>{e.dataTransfer.setData("application/reactflow",r),e.dataTransfer.effectAllowed="move"};return a.jsx(P.z,{variant:"secondary",className:"flex justify-between items-center gap-2 border w-full",draggable:!0,onDragStart:r=>t(r,e),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(r.icon,{size:20}),r.label]})})}eS.displayName=eV.displayName;var eZ=t(68588),eB=t(79481);function eW({workflow:e}){return a.jsx(eZ.o,{children:a.jsx(s.tV,{children:(0,a.jsxs)("div",{className:"flex flex-col h-full w-full overflow-hidden",children:[a.jsx(G.default,{title:"编辑器",subtitle:e.name,workflowId:e.id,isPublished:e.status===eB.x8.PUBLISHED}),(0,a.jsxs)("section",{className:"flex h-full overflow-auto",children:[a.jsx(eF,{}),a.jsx(z,{workflow:e})]})]})})})}},38443:(e,r,t)=>{"use strict";t.d(r,{C:()=>i});var a=t(10326);t(17577);var s=t(79360),n=t(51223);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r,...t}){return a.jsx("div",{className:(0,n.cn)(l({variant:r}),e),...t})}},41190:(e,r,t)=>{"use strict";t.d(r,{I:()=>l});var a=t(10326),s=t(17577),n=t(51223);let l=s.forwardRef(({className:e,type:r,...t},s)=>a.jsx("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));l.displayName="Input"},44794:(e,r,t)=>{"use strict";t.d(r,{_:()=>d});var a=t(10326),s=t(17577),n=t(34478),l=t(79360),i=t(51223);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef(({className:e,...r},t)=>a.jsx(n.f,{ref:t,className:(0,i.cn)(o(),e),...r}));d.displayName=n.f.displayName},29280:(e,r,t)=>{"use strict";t.d(r,{Bw:()=>h,DI:()=>u,Ph:()=>c,Ql:()=>g,i4:()=>p,ki:()=>f,n5:()=>b});var a=t(10326),s=t(17577),n=t(13326),l=t(941),i=t(96633),o=t(32933),d=t(51223);let c=n.fC,u=n.ZA,f=n.B4,p=s.forwardRef(({className:e,children:r,...t},s)=>(0,a.jsxs)(n.xz,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[r,a.jsx(n.JO,{asChild:!0,children:a.jsx(l.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=n.xz.displayName;let x=s.forwardRef(({className:e,...r},t)=>a.jsx(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:a.jsx(i.Z,{className:"h-4 w-4"})}));x.displayName=n.u_.displayName;let m=s.forwardRef(({className:e,...r},t)=>a.jsx(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:a.jsx(l.Z,{className:"h-4 w-4"})}));m.displayName=n.$G.displayName;let h=s.forwardRef(({className:e,children:r,position:t="popper",...s},l)=>a.jsx(n.h_,{children:(0,a.jsxs)(n.VY,{ref:l,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...s,children:[a.jsx(x,{}),a.jsx(n.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),a.jsx(m,{})]})}));h.displayName=n.VY.displayName;let b=s.forwardRef(({className:e,...r},t)=>a.jsx(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...r}));b.displayName=n.__.displayName;let g=s.forwardRef(({className:e,children:r,...t},s)=>(0,a.jsxs)(n.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(n.wU,{children:a.jsx(o.Z,{className:"h-4 w-4"})})}),a.jsx(n.eT,{children:r})]}));g.displayName=n.ck.displayName,s.forwardRef(({className:e,...r},t)=>a.jsx(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...r})).displayName=n.Z0.displayName},82015:(e,r,t)=>{"use strict";t.d(r,{g:()=>l});var a=t(10326),s=t(17577),n=t(51223);let l=s.forwardRef(({className:e,...r},t)=>a.jsx("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...r}));l.displayName="Textarea"},79481:(e,r,t)=>{"use strict";var a,s,n,l;t.d(r,{B6:()=>s,KD:()=>l,x8:()=>a}),function(e){e.DRAFT="DRAFT",e.PUBLISHED="PUBLISHED"}(a||(a={})),function(e){e.PENDING="PENDING",e.RUNNING="RUNNING",e.COMPLETED="COMPLETED",e.FAILED="FAILED"}(s||(s={})),function(e){e.MANUAL="MANUAL",e.CRON="CRON"}(n||(n={})),function(e){e.CREATED="CREATED",e.PENDING="PENDING",e.RUNNING="RUNNING",e.COMPLETED="COMPLETED",e.FAILED="FAILED"}(l||(l={}))},21724:(e,r,t)=>{"use strict";t.r(r),t.d(r,{getCredentialsForUser:()=>l});var a=t(27745);t(26461);var s=t(24831),n=t(93396);async function l(){let{userId:e}=(0,n.auth)();if(!e)throw Error("账号错误");return s.default.credential.findMany({where:{userId:e},orderBy:{name:"asc"}})}(0,t(85723).ensureServerEntryExports)([l]),(0,a.registerServerReference)("509fd53314a01037dfc143dc26c2136db06dbe5b",l)},73202:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var a=t(19510),s=t(19541);function n(){return a.jsx("div",{className:"flex h-screen w-full items-center justify-center",children:a.jsx(s.Z,{size:30,className:"animate-spin stroke-primary"})})}},18934:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(19510),s=t(27577),n=t(68570);let l=(0,n.createProxy)(String.raw`E:\Demo\next-workflow\src\app\workflow\_components\Editor.tsx`),{__esModule:i,$$typeof:o}=l;l.default;let d=(0,n.createProxy)(String.raw`E:\Demo\next-workflow\src\app\workflow\_components\Editor.tsx#default`);var c=t(13538);async function u({params:e}){let{workflowId:r}=e,{userId:t}=(0,s.I)();if(!t)return a.jsx("div",{children:"账户错误"});let n=await c.Z.workflow.findUnique({where:{id:r,userId:t}});return n?a.jsx(d,{workflow:n}):a.jsx("div",{children:"工作流未找到"})}},60517:()=>{},34478:(e,r,t)=>{"use strict";t.d(r,{f:()=>i});var a=t(17577),s=t(45226),n=t(10326),l=a.forwardRef((e,r)=>(0,n.jsx)(s.WV.label,{...e,ref:r,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));l.displayName="Label";var i=l}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[948,547,86,0,370,343,130,970,877,730,581],()=>t(63239));module.exports=a})();